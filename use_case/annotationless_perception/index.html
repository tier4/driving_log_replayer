
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://tier4.github.io/driving_log_replayer/use_case/annotationless_perception/">
      
      
        <link rel="prev" href="../performance_diag/">
      
      
        <link rel="next" href="../traffic_light/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>Evaluate Annotationless Perception - Driving Log Replayer Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#evaluate-annotationless-perception" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Driving Log Replayer Documentation" class="md-header__button md-logo" aria-label="Driving Log Replayer Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Driving Log Replayer Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Evaluate Annotationless Perception
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../ja/use_case/annotationless_perception/" hreflang="ja" class="md-select__link">
              日本語
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/tier4/driving_log_replayer" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Driving Log Replayer Documentation

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../quick_start/installation/" class="md-tabs__link">
          
  
    
  
  Quick start

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../trouble_shooting/" class="md-tabs__link">
          
  
    
  
  Trouble shooting

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../overview/" class="md-tabs__link">
          
  
    
  
  Overview

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../scenario_format/" class="md-tabs__link">
          
  
    
  
  Scenario format

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../result_format/" class="md-tabs__link">
          
  
    
  
  Result format

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  Use case

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../analyzer/" class="md-tabs__link">
          
  
    
  
  Analyzer

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Driving Log Replayer Documentation" class="md-nav__button md-logo" aria-label="Driving Log Replayer Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Driving Log Replayer Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tier4/driving_log_replayer" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Driving Log Replayer Documentation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Quick start
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Quick start
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/localization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NDT Localization Evaluation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/yabloc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    YabLoc Evaluation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/eagleye/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Eagleye Evaluation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/ar_tag_based_localizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ArTagBasedLocalizer Evaluation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/obstacle_segmentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Obstacle Segmentation Evaluation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/perception/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Perception Evaluation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/annotationless_perception/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotationless Perception
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../trouble_shooting/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Trouble shooting
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Trouble shooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../overview/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Overview
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/command/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Command
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../scenario_format/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Scenario format
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Scenario format
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../result_format/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Result format
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Result format
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Use case
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Use case
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../localization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluate NDT estimation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../yabloc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluate YabLoc estimation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../eagleye/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluate Eagleye estimation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ar_tag_based_localizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluate ArTagBasedLocalizer estimation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../obstacle_segmentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluate point cloud generation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../perception/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluate perception
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../performance_diag/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluate diagnostics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Evaluate Annotationless Perception
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Evaluate Annotationless Perception
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#evaluation-method" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation method
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evaluation-results" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation results
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Evaluation results">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#normal" class="md-nav__link">
    <span class="md-ellipsis">
      Normal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error" class="md-nav__link">
    <span class="md-ellipsis">
      Error
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#topic-name-and-data-type-used-by-evaluation-node" class="md-nav__link">
    <span class="md-ellipsis">
      Topic name and data type used by evaluation node
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Topic name and data type used by evaluation node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#method-of-specifying-conditions" class="md-nav__link">
    <span class="md-ellipsis">
      Method of specifying conditions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arguments-passed-to-logging_simulatorlaunch" class="md-nav__link">
    <span class="md-ellipsis">
      Arguments passed to logging_simulator.launch
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Arguments passed to logging_simulator.launch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-specify-the-sensing-argument" class="md-nav__link">
    <span class="md-ellipsis">
      How to specify the sensing argument
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simulation" class="md-nav__link">
    <span class="md-ellipsis">
      simulation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="simulation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#topic-to-be-included-in-the-input-rosbag" class="md-nav__link">
    <span class="md-ellipsis">
      Topic to be included in the input rosbag
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#topics-that-must-not-be-included-in-the-input-rosbag" class="md-nav__link">
    <span class="md-ellipsis">
      Topics that must not be included in the input rosbag
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      evaluation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="evaluation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario-format" class="md-nav__link">
    <span class="md-ellipsis">
      Scenario Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-result-format" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation Result Format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../traffic_light/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluate perception(traffic light)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../perception_2d/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluate perception(Camera)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../analyzer/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Analyzer
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Analyzer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#evaluation-method" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation method
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evaluation-results" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation results
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Evaluation results">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#normal" class="md-nav__link">
    <span class="md-ellipsis">
      Normal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error" class="md-nav__link">
    <span class="md-ellipsis">
      Error
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#topic-name-and-data-type-used-by-evaluation-node" class="md-nav__link">
    <span class="md-ellipsis">
      Topic name and data type used by evaluation node
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Topic name and data type used by evaluation node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#method-of-specifying-conditions" class="md-nav__link">
    <span class="md-ellipsis">
      Method of specifying conditions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arguments-passed-to-logging_simulatorlaunch" class="md-nav__link">
    <span class="md-ellipsis">
      Arguments passed to logging_simulator.launch
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Arguments passed to logging_simulator.launch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-specify-the-sensing-argument" class="md-nav__link">
    <span class="md-ellipsis">
      How to specify the sensing argument
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simulation" class="md-nav__link">
    <span class="md-ellipsis">
      simulation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="simulation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#topic-to-be-included-in-the-input-rosbag" class="md-nav__link">
    <span class="md-ellipsis">
      Topic to be included in the input rosbag
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#topics-that-must-not-be-included-in-the-input-rosbag" class="md-nav__link">
    <span class="md-ellipsis">
      Topics that must not be included in the input rosbag
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      evaluation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="evaluation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario-format" class="md-nav__link">
    <span class="md-ellipsis">
      Scenario Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-result-format" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation Result Format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="evaluate-annotationless-perception">Evaluate Annotationless Perception<a class="headerlink" href="#evaluate-annotationless-perception" title="Permanent link">#</a></h1>
<p>Evaluate Autoware's recognition features (perception) without annotations using the perception_online_evaluator.</p>
<p>Requires Autoware with the following PR features.
<a href="https://github.com/autowarefoundation/autoware.universe/pull/6556">https://github.com/autowarefoundation/autoware.universe/pull/6556</a></p>
<h2 id="evaluation-method">Evaluation method<a class="headerlink" href="#evaluation-method" title="Permanent link">#</a></h2>
<p>The annotationless_perception evaluation is executed by launching the <code>annotationless_perception.launch.py</code> file.
Launching the file executes the following steps:</p>
<ol>
<li>Execute launch of evaluation node (<code>annotationless_perception_evaluator_node</code>), <code>logging_simulator.launch</code> file and <code>ros2 bag play</code> command</li>
<li>Autoware receives sensor data output from input rosbag and the perception module performs recognition.</li>
<li>The perception_online_evaluator publishes diagnostic topic to <code>/perception/perception_online_evaluator/metrics</code></li>
<li>The evaluation node subscribes to the topic and evaluates data. The result is dumped into a file.</li>
<li>When the playback of the rosbag is finished, Autoware's launch is automatically terminated, and the evaluation is completed.</li>
</ol>
<h2 id="evaluation-results">Evaluation results<a class="headerlink" href="#evaluation-results" title="Permanent link">#</a></h2>
<p>The output topic of perception_online_evaluator is in the form of the following sample.
<a href="https://github.com/tier4/driving_log_replayer/blob/main/sample/annotationless_perception/diag_topic.txt">topic sample</a></p>
<p>For each subscription, the following judgment results are output for each recognition class.</p>
<p>If all classes are normal, the test is successful.</p>
<h3 id="normal">Normal<a class="headerlink" href="#normal" title="Permanent link">#</a></h3>
<p>The following two values specified in the scenario or launch argument are used to judge</p>
<ul>
<li>Threshold</li>
<li>PassRange(Coefficient to correct threshold)</li>
</ul>
<p>Success or failure is determined for each status.name in <code>/perception/perception_online_evaluator/metrics</code> according to the following rules.
Items for which no threshold is set (min, max, mean) are always judged as normal. Only those items for which a threshold is specified are subject to evaluation.</p>
<h4 id="min">min<a class="headerlink" href="#min" title="Permanent link">#</a></h4>
<p>If <code>threshold * lower_limit</code> &lt;= <code>minimum value of min</code> &lt;= <code>threshold * upper_limit</code>, it is assumed to be normal.</p>
<h4 id="max">max<a class="headerlink" href="#max" title="Permanent link">#</a></h4>
<p>If <code>threshold * lower_limit</code> &lt;= <code>maximum value of max</code> &lt;= <code>threshold * upper_limit</code>, it is assumed to be normal.</p>
<p>Lower limit recommended to be 0.0</p>
<h4 id="mean">mean<a class="headerlink" href="#mean" title="Permanent link">#</a></h4>
<p>If <code>threshold * lower_limit</code> &lt;= <code>average value of mean</code> &lt;= <code>threshold * upper_limit</code>, it is assumed to be normal.</p>
<h4 id="metric_value">metric_value<a class="headerlink" href="#metric_value" title="Permanent link">#</a></h4>
<p>If <code>threshold * lower_limit</code> &lt;= <code>value of metric_value</code> &lt;= <code>threshold * upper_limit</code>, it is assumed to be normal.
metric_value is determined by the current topic value only and does not update the values of min, max, and mean metrics.</p>
<p>An illustration is shown below.</p>
<p><img alt="metrics" src="../images/annotationless_metrics.drawio.svg" /></p>
<h3 id="error">Error<a class="headerlink" href="#error" title="Permanent link">#</a></h3>
<p>When the normal condition is not met</p>
<h2 id="topic-name-and-data-type-used-by-evaluation-node">Topic name and data type used by evaluation node<a class="headerlink" href="#topic-name-and-data-type-used-by-evaluation-node" title="Permanent link">#</a></h2>
<p>Subscribed topics:</p>
<table>
<thead>
<tr>
<th>Topic name</th>
<th>Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td>/perception/perception_online_evaluator/metrics</td>
<td>diagnostic_msgs::msg::DiagnosticArray</td>
</tr>
</tbody>
</table>
<p>Published topics:</p>
<table>
<thead>
<tr>
<th>Topic name</th>
<th>Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td>N/A</td>
<td>N/A</td>
</tr>
</tbody>
</table>
<h3 id="method-of-specifying-conditions">Method of specifying conditions<a class="headerlink" href="#method-of-specifying-conditions" title="Permanent link">#</a></h3>
<p>The conditions can be given in two ways</p>
<h4 id="describe-in-scenario">Describe in scenario<a class="headerlink" href="#describe-in-scenario" title="Permanent link">#</a></h4>
<div class="highlight"><pre><span></span><code><span class="nt">Evaluation</span><span class="p">:</span>
<span class="w">  </span><span class="nt">UseCaseName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">annotationless_perception</span>
<span class="w">  </span><span class="nt">UseCaseFormatVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.3.0</span>
<span class="w">  </span><span class="nt">Conditions</span><span class="p">:</span>
<span class="w">    </span><span class="nt">ClassConditions</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># Describe the conditions for each class. If a class with no conditions is output, only the metrics are calculated. It does not affect the evaluation.</span>
<span class="w">      </span><span class="c1"># In the sample data, the class of TRUCK is also output, but the condition is not described, so TRUCK is always Success.</span>
<span class="w">      </span><span class="c1"># When specifying conditions from result.jsonl, only keys described here will be updated.</span>
<span class="w">      </span><span class="c1"># Even though TRUCK metrics appear in result.jsonl, they are not added to the evaluation condition because the TRUCK key is not specified in this example.</span>
<span class="w">      </span><span class="nt">CAR</span><span class="p">:</span><span class="w"> </span><span class="c1"># classification key</span>
<span class="w">        </span><span class="nt">Threshold</span><span class="p">:</span>
<span class="w">          </span><span class="c1"># Keys not described will not be evaluated (will always be a success)</span>
<span class="w">          </span><span class="nt">lateral_deviation</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> max</span><span class="p">:</span><span class="w"> </span><span class="nv">0.4</span><span class="p p-Indicator">,</span><span class="nt"> mean</span><span class="p">:</span><span class="w"> </span><span class="nv">0.019</span><span class="w"> </span><span class="p p-Indicator">}</span>
<span class="w">          </span><span class="nt">yaw_deviation</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> max</span><span class="p">:</span><span class="w"> </span><span class="nv">3.1411</span><span class="p p-Indicator">,</span><span class="nt"> mean</span><span class="p">:</span><span class="w"> </span><span class="nv">0.05</span><span class="w"> </span><span class="p p-Indicator">}</span>
<span class="w">          </span><span class="nt">predicted_path_deviation_5.00</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> max</span><span class="p">:</span><span class="w"> </span><span class="nv">16.464</span><span class="p p-Indicator">,</span><span class="nt"> mean</span><span class="p">:</span><span class="w"> </span><span class="nv">1.8</span><span class="w"> </span><span class="p p-Indicator">}</span>
<span class="w">          </span><span class="nt">total_objects_count_r60.00_h10.00</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> metric_value</span><span class="p">:</span><span class="w"> </span><span class="nv">10</span><span class="w"> </span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="nt">PassRange</span><span class="p">:</span>
<span class="w">          </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0-2.0</span><span class="w"> </span><span class="c1"># lower[&lt;=1.0]-upper[&gt;=1.0]</span>
<span class="w">          </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0-2.0</span><span class="w"> </span><span class="c1"># lower[&lt;=1.0]-upper[&gt;=1.0]</span>
<span class="w">          </span><span class="nt">mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5-2.0</span><span class="w"> </span><span class="c1"># lower[&lt;=1.0]-upper[&gt;=1.0]</span>
<span class="w">          </span><span class="nt">metric_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.9-1.1</span>
<span class="w">      </span><span class="nt">BUS</span><span class="p">:</span><span class="w"> </span><span class="c1"># classification key</span>
<span class="w">        </span><span class="nt">Threshold</span><span class="p">:</span>
<span class="w">          </span><span class="c1"># Only lateral_deviation is evaluated.</span>
<span class="w">          </span><span class="nt">yaw_rate</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> max</span><span class="p">:</span><span class="w"> </span><span class="nv">0.05</span><span class="w"> </span><span class="p p-Indicator">}</span><span class="w"> </span><span class="c1"># Only max is evaluated.</span>
<span class="w">        </span><span class="nt">PassRange</span><span class="p">:</span>
<span class="w">          </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0-2.0</span><span class="w"> </span><span class="c1"># lower[&lt;=1.0]-upper[&gt;=1.0]</span>
<span class="w">          </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0-2.0</span><span class="w"> </span><span class="c1"># lower[&lt;=1.0]-upper[&gt;=1.0]</span>
<span class="w">          </span><span class="nt">mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5-2.0</span><span class="w"> </span><span class="c1"># lower[&lt;=1.0]-upper[&gt;=1.0]</span>
<span class="w">          </span><span class="nt">metric_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.9-1.1</span>
</code></pre></div>
<h4 id="specify-by-launch-argument">Specify by launch argument<a class="headerlink" href="#specify-by-launch-argument" title="Permanent link">#</a></h4>
<p>This method is assumed to be used mainly.</p>
<p>If the file path of result.jsonl output from past tests is specified, the metrics values from past tests are used as threshold values.
The values are updated from result.jsonl only for the thresholds listed in the scenario.</p>
<p>The passing range can also be specified as an argument.</p>
<p>An image of its use is shown below.</p>
<p><img alt="threshold" src="../images/annotationless_threshold.drawio.svg" /></p>
<h5 id="driving-log-replayer-cli">driving-log-replayer-cli<a class="headerlink" href="#driving-log-replayer-cli" title="Permanent link">#</a></h5>
<div class="highlight"><pre><span></span><code>dlr<span class="w"> </span>simulation<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span>annotationless_perception<span class="w"> </span>-l<span class="w"> </span>annotationless_threshold_file:<span class="o">=</span><span class="si">${</span><span class="nv">previous_test_result</span><span class="p">.jsonl_path</span><span class="si">}</span><span class="w"> </span>-l<span class="w"> </span><span class="s1">&#39;annotationless_pass_range:={&quot;KEY1&quot;:VALUE1&quot;[,&quot;KEY2&quot;:&quot;VALUE2&quot;...]}&#39;</span>

<span class="c1"># example</span>
dlr<span class="w"> </span>simulation<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span>annotationless_perception<span class="w"> </span>-l<span class="w"> </span>annotationless_threshold_file:<span class="o">=</span><span class="nv">$HOME</span>/out/annotationless/2024-0314-155106/sample/result.jsonl<span class="w"> </span>-l<span class="w"> </span><span class="s1">&#39;annotationless_pass_range:={&quot;CAR&quot;:{&quot;min&quot;:&quot;0.0-1.1&quot;,&quot;max&quot;:&quot;0.0-1.2&quot;,&quot;mean&quot;:&quot;0.5-1.3&quot;},&quot;BUS&quot;:{&quot;min&quot;:&quot;0.0-1.1&quot;,&quot;max&quot;:&quot;0.0-1.2&quot;,&quot;mean&quot;:&quot;0.5-1.3&quot;}}&#39;</span>
</code></pre></div>
<h5 id="webautocli">WebAutoCLI<a class="headerlink" href="#webautocli" title="Permanent link">#</a></h5>
<div class="highlight"><pre><span></span><code>webauto<span class="w"> </span>ci<span class="w"> </span>scenario<span class="w"> </span>run<span class="w"> </span>--project-id<span class="w"> </span><span class="si">${</span><span class="nv">project</span><span class="p">-id</span><span class="si">}</span><span class="w"> </span>--scenario-id<span class="w"> </span><span class="si">${</span><span class="nv">scenario</span><span class="p">-id</span><span class="si">}</span><span class="w"> </span>--scenario-version-id<span class="w"> </span><span class="si">${</span><span class="nv">scenario</span><span class="p">-version-id</span><span class="si">}</span><span class="w"> </span>--simulator-parameter-overrides<span class="w"> </span><span class="s1">&#39;annotationless_threshold_file=${previous_test_result.jsonl_path},annotationless_pass_range:={&quot;KEY1&quot;:VALUE1&quot;[,&quot;KEY2&quot;:&quot;VALUE2&quot;...]}&#39;</span>
</code></pre></div>
<h5 id="autoware-evaluator">Autoware Evaluator<a class="headerlink" href="#autoware-evaluator" title="Permanent link">#</a></h5>
<p>Add to parameters in the simulator configuration in <code>.webauto-ci.yml</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nt">simulations</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">annotationless_perception</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">annotationless_perception</span>
<span class="w">    </span><span class="nt">simulator</span><span class="p">:</span>
<span class="w">      </span><span class="nt">deployment</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">container</span>
<span class="w">        </span><span class="nt">artifact</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
<span class="w">      </span><span class="nt">runtime</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">simulator/standard1/amd64/medium</span>
<span class="w">      </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">        </span><span class="nt">annotationless_threshold_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${previous_test_result.jsonl_path}</span>
<span class="w">        </span><span class="nt">annotationless_pass_range</span><span class="p">:</span>
<span class="w">          </span><span class="nt">KEY1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VALUE1</span>
<span class="w">          </span><span class="nt">KEY2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VALUE2</span>
</code></pre></div>
<h4 id="how-to-update-scenario-conditions">How to update scenario conditions<a class="headerlink" href="#how-to-update-scenario-conditions" title="Permanent link">#</a></h4>
<p>The driving-log-replayer-cli has the ability to run multiple scenarios in succession that exist under the data_directory of a profile.
On the other hand, when evaluation conditions are given as arguments, the same arguments are applied to multiple scenarios, which is inconvenient.</p>
<p>In the case of local testing using driving-log-replayer-cli, instead of specifying arguments, the following commands are provided so that scenario conditions can be updated as needed.</p>
<ul>
<li>update-condition command to manually update scenario conditions</li>
<li>run's -u option to automatically update scenario conditions after a simulation run</li>
</ul>
<p>There are two ways to update</p>
<ul>
<li>existing Update only those items that appear in the scenario</li>
<li>all Update all values in the metrics</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># manual update</span>
dlr<span class="w"> </span>simulation<span class="w"> </span>update-condition<span class="w"> </span>-s<span class="w"> </span><span class="si">${</span><span class="nv">scenario_path</span><span class="si">}</span><span class="w"> </span>-r<span class="w"> </span><span class="si">${</span><span class="nv">result</span><span class="p">.jsonl_path</span><span class="si">}</span><span class="w"> </span>-u<span class="w"> </span><span class="si">${</span><span class="nv">existing</span><span class="p">|all</span><span class="si">}</span>

<span class="c1"># automatically update scenario after simulation run</span>
dlr<span class="w"> </span>simulation<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span>annotationless_perception<span class="w"> </span>-u<span class="w"> </span><span class="si">${</span><span class="nv">existing</span><span class="p">|all</span><span class="si">}</span>
</code></pre></div>
<h2 id="arguments-passed-to-logging_simulatorlaunch">Arguments passed to logging_simulator.launch<a class="headerlink" href="#arguments-passed-to-logging_simulatorlaunch" title="Permanent link">#</a></h2>
<p>To make Autoware processing less resource-consuming, modules that are not relevant to evaluation are disabled by passing the <code>false</code> parameter as a launch argument.
The following parameters are set to <code>false</code>:</p>
<ul>
<li>perception: true</li>
<li>planning: false</li>
<li>control: false</li>
<li>sensing: false / true (default false, set by launch argument)</li>
</ul>
<h3 id="how-to-specify-the-sensing-argument">How to specify the sensing argument<a class="headerlink" href="#how-to-specify-the-sensing-argument" title="Permanent link">#</a></h3>
<h4 id="driving-log-replayer-cli_1">driving-log-replayer-cli<a class="headerlink" href="#driving-log-replayer-cli_1" title="Permanent link">#</a></h4>
<div class="highlight"><pre><span></span><code>dlr<span class="w"> </span>simulation<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span>annotationless_perception<span class="w"> </span>-l<span class="w"> </span>sensing:<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<h4 id="webautocli_1">WebAutoCLI<a class="headerlink" href="#webautocli_1" title="Permanent link">#</a></h4>
<div class="highlight"><pre><span></span><code>webauto<span class="w"> </span>ci<span class="w"> </span>scenario<span class="w"> </span>run<span class="w"> </span>--project-id<span class="w"> </span><span class="si">${</span><span class="nv">project</span><span class="p">-id</span><span class="si">}</span><span class="w"> </span>--scenario-id<span class="w"> </span><span class="si">${</span><span class="nv">scenario</span><span class="p">-id</span><span class="si">}</span><span class="w"> </span>--scenario-version-id<span class="w"> </span><span class="si">${</span><span class="nv">scenario</span><span class="p">-version-id</span><span class="si">}</span><span class="w"> </span>--simulator-parameter-overrides<span class="w"> </span><span class="s1">&#39;sensing=true&#39;</span>
</code></pre></div>
<h4 id="autoware-evaluator_1">Autoware Evaluator<a class="headerlink" href="#autoware-evaluator_1" title="Permanent link">#</a></h4>
<p>Add to parameters in the simulator configuration in <code>.webauto-ci.yml</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nt">simulations</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">annotationless_perception</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">annotationless_perception</span>
<span class="w">    </span><span class="nt">simulator</span><span class="p">:</span>
<span class="w">      </span><span class="nt">deployment</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">container</span>
<span class="w">        </span><span class="nt">artifact</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
<span class="w">      </span><span class="nt">runtime</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">simulator/standard1/amd64/medium</span>
<span class="w">      </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">        </span><span class="nt">sensing</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
</code></pre></div>
<h2 id="simulation">simulation<a class="headerlink" href="#simulation" title="Permanent link">#</a></h2>
<p>State the information required to run the simulation.</p>
<h3 id="topic-to-be-included-in-the-input-rosbag">Topic to be included in the input rosbag<a class="headerlink" href="#topic-to-be-included-in-the-input-rosbag" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th>Topic name</th>
<th>Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td>/pacmod/from_can_bus</td>
<td>can_msgs/msg/Frame</td>
</tr>
<tr>
<td>/localization/kinematic_state</td>
<td>nav_msgs/msg/Odometry</td>
</tr>
<tr>
<td>/sensing/gnss/ublox/fix_velocity</td>
<td>geometry_msgs/msg/TwistWithCovarianceStamped</td>
</tr>
<tr>
<td>/sensing/gnss/ublox/nav_sat_fix</td>
<td>sensor_msgs/msg/NavSatFix</td>
</tr>
<tr>
<td>/sensing/gnss/ublox/navpvt</td>
<td>ublox_msgs/msg/NavPVT</td>
</tr>
<tr>
<td>/sensing/imu/tamagawa/imu_raw</td>
<td>sensor_msgs/msg/Imu</td>
</tr>
<tr>
<td>/sensing/lidar/concatenated/pointcloud</td>
<td>sensor_msgs/msg/PointCloud2</td>
</tr>
<tr>
<td>/sensing/lidar/*/velodyne_packets</td>
<td>velodyne_msgs/VelodyneScan</td>
</tr>
<tr>
<td>/tf</td>
<td>tf2_msgs/msg/TFMessage</td>
</tr>
</tbody>
</table>
<p>The vehicle topics can be included instead of CAN.</p>
<table>
<thead>
<tr>
<th>Topic name</th>
<th>Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td>/localization/kinematic_state</td>
<td>nav_msgs/msg/Odometry</td>
</tr>
<tr>
<td>/sensing/gnss/ublox/fix_velocity</td>
<td>geometry_msgs/msg/TwistWithCovarianceStamped</td>
</tr>
<tr>
<td>/sensing/gnss/ublox/nav_sat_fix</td>
<td>sensor_msgs/msg/NavSatFix</td>
</tr>
<tr>
<td>/sensing/gnss/ublox/navpvt</td>
<td>ublox_msgs/msg/NavPVT</td>
</tr>
<tr>
<td>/sensing/imu/tamagawa/imu_raw</td>
<td>sensor_msgs/msg/Imu</td>
</tr>
<tr>
<td>/sensing/lidar/concatenated/pointcloud</td>
<td>sensor_msgs/msg/PointCloud2</td>
</tr>
<tr>
<td>/sensing/lidar/*/velodyne_packets</td>
<td>velodyne_msgs/VelodyneScan</td>
</tr>
<tr>
<td>/tf</td>
<td>tf2_msgs/msg/TFMessage</td>
</tr>
<tr>
<td>/vehicle/status/control_mode</td>
<td>autoware_auto_vehicle_msgs/msg/ControlModeReport</td>
</tr>
<tr>
<td>/vehicle/status/gear_status</td>
<td>autoware_auto_vehicle_msgs/msg/GearReport</td>
</tr>
<tr>
<td>/vehicle/status/steering_status</td>
<td>autoware_auto_vehicle_msgs/SteeringReport</td>
</tr>
<tr>
<td>/vehicle/status/turn_indicators_status</td>
<td>autoware_auto_vehicle_msgs/msg/TurnIndicatorsReport</td>
</tr>
<tr>
<td>/vehicle/status/velocity_status</td>
<td>autoware_auto_vehicle_msgs/msg/VelocityReport</td>
</tr>
</tbody>
</table>
<h3 id="topics-that-must-not-be-included-in-the-input-rosbag">Topics that must not be included in the input rosbag<a class="headerlink" href="#topics-that-must-not-be-included-in-the-input-rosbag" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th>Topic name</th>
<th>Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td>/clock</td>
<td>rosgraph_msgs/msg/Clock</td>
</tr>
</tbody>
</table>
<p>The clock is output by the --clock option of ros2 bag play, so if it is recorded in the bag itself, it is output twice, so it is not included in the bag.</p>
<h2 id="evaluation">evaluation<a class="headerlink" href="#evaluation" title="Permanent link">#</a></h2>
<p>State the information necessary for the evaluation.</p>
<h3 id="scenario-format">Scenario Format<a class="headerlink" href="#scenario-format" title="Permanent link">#</a></h3>
<p>See <a href="https://github.com/tier4/driving_log_replayer/blob/main/sample/annotationless_perception/scenario.yaml">sample</a></p>
<h3 id="evaluation-result-format">Evaluation Result Format<a class="headerlink" href="#evaluation-result-format" title="Permanent link">#</a></h3>
<p>See <a href="https://github.com/tier4/driving_log_replayer/blob/main/sample/annotationless_perception/result.json">sample</a></p>
<p>The format of each frame and the metrics format are shown below.
<strong>NOTE: common part of the result file format, which has already been explained, is omitted.</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;Frame&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Ego&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nt">&quot;OBJECT_CLASSIFICATION&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Recognized class</span>
<span class="w">      </span><span class="nt">&quot;Result&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;Total&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Success or Fail&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;Frame&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Success or Fail&quot;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// The results for Total and Frame are the same. The same values are output to make the data structure the same as other evaluations.</span>
<span class="w">      </span><span class="nt">&quot;Info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name_min_max_mean&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;min&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;min value&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;max value&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;mean&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;average value&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;name_metric_value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;metric_value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value&quot;</span><span class="p">},</span>
<span class="w">        </span><span class="err">...</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;Metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name_min_max_mean&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;min&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Minimum value of min&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Maximum value of max&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;mean&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Average value of mean&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="err">...</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>See the figure below for the meaning of items</p>
<p><img alt="lateral_deviation" src="../images/lateral_deviation.png" /></p>
<p><img alt="predicted_path_deviation" src="../images/predicted_path_deviation.png" /></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../performance_diag/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Evaluate diagnostics">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Evaluate diagnostics
              </div>
            </div>
          </a>
        
        
          
          <a href="../traffic_light/" class="md-footer__link md-footer__link--next" aria-label="Next: Evaluate perception(traffic light)">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Evaluate perception(traffic light)
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 TIER IV Inc.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.expand", "navigation.indexes", "navigation.instant", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.footer"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  </body>
</html>